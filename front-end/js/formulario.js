var valor,categoria,status,obs,data,categorias=["vestuarios","educacao","restaurante","lazer","supermercado","casa","saude","servicos","viagem","eletronicos","transporte","outros"];function trocaClasse(t,e,a){t.classList.remove(e),t.classList.add(a)}function alteraQuadroRegistro(){"conta"==$("#palavra-chave").text()?(trocaClasse(document.querySelector("#dinheiro"),"conta","emprestimo"),trocaClasse(document.querySelector("#palavra-chave"),"conta","emprestimo"),trocaClasse(document.querySelector("#outra_data"),"conta","emprestimo"),trocaClasse(document.querySelector("#botao-de-registro"),"conta","emprestimo"),trocaClasse(document.querySelector("#botao-de-registro"),"conta-botao","emprestimo-botao"),trocaClasse(document.querySelector("#alterador"),"emprestimo-link","conta-link"),trocaClasse(document.querySelector("#voltar-mobile"),"emprestimo-link","conta-link"),document.getElementById("categorias").style.display="none",document.getElementById("identidade-emprestimo").style.display="block",$("#previa-conteudo").text("Quanto vocÃª "),$("#palavra-chave").text("emprestou"),$("#alterador").text("Registrar uma conta")):(trocaClasse(document.querySelector("#dinheiro"),"emprestimo","conta"),trocaClasse(document.querySelector("#palavra-chave"),"emprestimo","conta"),trocaClasse(document.querySelector("#outra_data"),"emprestimo","conta"),trocaClasse(document.querySelector("#botao-de-registro"),"emprestimo","conta"),trocaClasse(document.querySelector("#botao-de-registro"),"emprestimo-botao","conta-botao"),trocaClasse(document.querySelector("#alterador"),"conta-link","emprestimo-link"),trocaClasse(document.querySelector("#voltar-mobile"),"conta-link","emprestimo-link"),document.getElementById("categorias").style.display="block",document.getElementById("identidade-emprestimo").style.display="none",$("#previa-conteudo").text("Qual o valor da "),$("#palavra-chave").text("conta"),$("#alterador").text("Registrar um emprestimo"))}function botaoNao(){document.getElementById("campo-data").style.display="block",document.getElementById("outra_data").value="",document.getElementById("sim").classList.remove("button-selected"),document.getElementById("nao").classList.add("button-selected"),status=!1}function botaoSim(){document.getElementById("campo-data").style.display="none",document.getElementById("nao").classList.remove("button-selected"),document.getElementById("sim").classList.add("button-selected"),status=!0}function categoriafun(t){for(var e in categorias)categorias[e]==t?document.getElementById(t).classList.add("button-selected"):document.getElementById(categorias[e]).classList.remove("button-selected");categoria=t}function botaoPrincipal(){"none"==document.getElementById("tabela").style.display?(document.getElementById("saldo-mobile").style.display="block",document.getElementById("tabela").style.display="block",document.getElementById("formulario").style.display="none",$("#botaoPmobi").text("REGISTRAR"),$("#botaoPdesk").text("REGISTRAR")):(document.getElementById("tabela").style.display="none",document.getElementById("saldo-mobile").style.display="none",document.getElementById("formulario").style.display="block",$("#botaoPmobi").text("VOLTAR"),$("#botaoPdesk").text("VOLTAR"))}function registro(){"emprestou"==$("#palavra-chave").text()&&validaRegistroEmprestimo()&&salvaEmprestimo(),"conta"==$("#palavra-chave").text()&&validaRegistroConta()&&$("#contaModal").modal("show")}function modalLimite(){$("#limiteModal").modal("show")}function modalSaldo(){$("#saldoModal").modal("show")}function validaRegistroConta(){return""!=$("#dinheiro").val()&&""!=categoria&&""!=status&&!("false"==status&&$("#outra_data").val().length<10)}function validaRegistroEmprestimo(){return""!=$("#dinheiro").val()&&""!=$("#nome").val()&&""!=status&&!("false"==status&&$("#outra_data").val().length<10)}function salvaConta(){valor=(valor=parseFloat($("#dinheiro").val().replace(".","").replace(",","."))).toFixed(2),obs=$("#descricao-conta").val(),data="false"==status?trocaData(data=$("#outra_data").val()):moment().format("YYYY-MM-DD"),registrando(obs,data,categoria,valor,status)}function salvaEmprestimo(){valor=(valor=parseFloat($("#dinheiro").val().replace(".","").replace(",","."))).toFixed(2),obs=$("#nome").val(),data="false"==status?trocaData(data=$("#outra_data").val()):moment().format("YYYY-MM-DD"),registrandoE(obs,data,"emprestimo",valor,status)}function registrandoE(t,e,a,o,s){var r={async:!0,crossDomain:!0,url:"https://tcc-adonis.herokuapp.com/billsToReceive",method:"POST",headers:{"content-type":"application/json",authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjEsImlhdCI6MTUzOTczMjkyMX0.SKnlKuM_wrX9g00BlCXbPJjVroNH4-FFDf4S6C9vXZM"},processData:!1,data:'{"descripition": "'+t+'","date": "'+e+'","category": "'+a+'","value": '+o+',"status": "'+s+'"}'};$.ajax(r).done(function(t){"true"==t.status&&atualizaSald(t.value),limpaFormulario(),botaoPrincipal(),getEmprestimosdepois()})}function registrando(t,e,a,o,s){var r={async:!0,crossDomain:!0,url:"https://tcc-adonis.herokuapp.com/billsToPay",method:"POST",headers:{"content-type":"application/json",authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjEsImlhdCI6MTUzOTczMjkyMX0.SKnlKuM_wrX9g00BlCXbPJjVroNH4-FFDf4S6C9vXZM"},processData:!1,data:'{"descripition": "'+t+'","date": "'+e+'","category": "'+a+'","value": '+o+',"status": "'+s+'"}'};$.ajax(r).done(function(t){"true"==t.status&&atualizaSald(-1*t.value),limpaFormulario(),botaoPrincipal(),getContas(),indicadorContaS()})}function trocaData(t){return t.substr(6,4)+"-"+t.substr(3,2)+"-"+t.substr(0,2)}function limpaFormulario(){valor="",categoria="",status="",obs="",data="",$("#dinheiro").val(""),$("#nome").val(""),categoriafun("limpar"),document.getElementById("sim").classList.remove("button-selected"),document.getElementById("nao").classList.remove("button-selected"),$("#outra_data").val(""),document.getElementById("campo-data").style.display="none",$("#descricao-conta").val("")}$(document).ready(function(){$(".dinheiro").mask("#.##0,00",{reverse:!0}),$("#outra_data").mask("99/99/9999")});